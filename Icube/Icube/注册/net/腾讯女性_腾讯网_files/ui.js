String.prototype.hasString=function(a){if(typeof a=="object"){for(var b=0,c=a.length;b<c;b++)if(!this.hasString(a[b]))return false;return true}else if(this.indexOf(a)!=-1)return true};String.prototype.breakWord=function(a,b){b||(b="<wbr/>");return this.replace(RegExp("(\\w{"+(a?a:0)+"})(\\w)","g"),function(c,e,f){return e+b+f})};window.UI||(UI={ajax:function(a){var b=UI.xmlHttp();b.onreadystatechange=function(){if(b.readyState==4)a.success(b.responseText);else return false};b.open("POST",a.url,true);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(UI.isObject(a.data)){var c=[];for(var e in a.data)c.push(e+"="+encodeURIComponent(a.data[e]));a.data=c.join("&")}b.send(a.data)},get:function(a,b,c){var e=UI.xmlHttp();e.onreadystatechange=function(){if(e.readyState==4)c(e.responseText);else return false};if(b!=undefined)if(UI.isObject(b)){var f=[];for(var g in b)f.push(g+"="+encodeURIComponent(b[g]));a+="?"+f.join("&")}else a+="?"+b;e.open("GET",a,true);e.send(null)},xmlHttp:function(){var a;if(window.ActiveXObject)a=new ActiveXObject("Microsoft.XMLHTTP");else if(window.XMLHttpRequest)a=new XMLHttpRequest;return a},getScript:function(a,b){var c=UI.DC("script");if(b)if(UI.B.ie)c.onreadystatechange=function(){if(c.readyState=="loaded"||c.readyState=="complete")b()};else c.onload=b;UI.A(c,"type","text/javascript");UI.A(c,"src",a);UI.GT(document,"head")[0].appendChild(c)},getCss:function(a,b){var c=UI.DC("link");if(b)c.onload=b;UI.A(c,"rel","stylesheet");UI.A(c,"type","text/css");UI.A(c,"href",a);UI.GT(document,"head")[0].appendChild(c)},evalScript:function(a){var b=this.regExp.script;a=a.match(new RegExp(b,"img"));UI.each(a,function(c){eval(c.match(new RegExp(b,"im"))[1])})},regExp:{script:"<script[^>]*>([\\S\\s]*?)<\/script>"},url:{encode:function(a){return escape(this._utf8_encode(a))},decode:function(a){return this._utf8_decode(unescape(a))},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var e=a.charCodeAt(c);if(e<128)b+=String.fromCharCode(e);else{if(e>127&&e<2048)b+=String.fromCharCode(e>>6|192);else{b+=String.fromCharCode(e>>12|224);b+=String.fromCharCode(e>>6&63|128)}b+=String.fromCharCode(e&63|128)}}return b},_utf8_decode:function(a){for(var b="",c=0,e=c1=c2=0;c<a.length;){e=a.charCodeAt(c);if(e<128){b+=String.fromCharCode(e);c++}else if(e>191&&e<224){c2=a.charCodeAt(c+1);b+=String.fromCharCode((e&31)<<6|c2&63);c+=2}else{c2=a.charCodeAt(c+1);c3=a.charCodeAt(c+2);b+=String.fromCharCode((e&15)<<12|(c2&63)<<6|c3&63);c+=3}}return b}},parseUrl:function(a){var b=document.location.href,c={};a=a||"?";if(!b.hasString(a))return c;a=b.split(a)[1].split("&");for(b=0;b<a.length;b++){var e=a[b].split("=");c[e[0]]=UI.B.ie?e[1]:UI.url.decode(e[1])}return c},cookie:function(a,b,c){if(b==undefined){a=a+"=";b=document.cookie.split(";");for(c=0;c<b.length;c++){for(var e=b[c];e.charAt(0)==" ";)e=e.substring(1,e.length);if(e.indexOf(a)==0)return decodeURIComponent(e.substring(a.length,e.length))}return null}else{e="";if(c){e=new Date;e.setTime(e.getTime()+c*24*60*60*1E3);e="; expires="+e.toGMTString()}document.cookie=a+"="+b+e+"; path=/"}},drag:function(a,b,c){var e=document;c=c!=undefined?c:true;UI.EA(a,"mousedown",function(f){b.start&&b.start(f);if(c)if(a.setCapture)a.setCapture();else window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);if(b.drag)e.onmousemove=b.drag;e.onmouseup=function(){if(c)if(a.releaseCapture)a.releaseCapture();else window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);b.stop&&b.stop(f);e.onmousemove=null;e.onmouseup=null;b.call&&b.call(f)}})},animate:function(a,b,c,e,f){f=f||0.4;var g=b.hasString("scroll"),q,k=setInterval(function(){var i=g?a[b]:UI.C(a,b),o;if(b=="opacity"){i*=100;c*=100;if(c>100)c=100}else g||(i=i=="auto"?0:Number(i.slice(0,-2)));if(Math.abs(c-i)<=3||g&&q==i){i=c;clearInterval(k)}o=q=i+(c-i)*f;if(g)a[b]=parseInt(o);else UI.C(a,b,b!="opacity"?o+"px":o/100+"");if(i==c)if(UI.isString(e))eval(e);else e&&e()},40);return k},getX:function(a){return a.offsetParent?a.offsetLeft+UI.getX(a.offsetParent):a.offsetLeft},getY:function(a){return a.offsetParent?a.offsetTop+UI.getY(a.offsetParent):a.offsetTop},within:function(a,b){var c=UI.getX(b)-UI.scrollX(),e=UI.width(b)+c,f=UI.getY(b)-UI.scrollY();b=UI.height(b)+f;var g={};if(a[0]>c&&a[0]<e&&a[1]>f&&a[1]<b){if(a[0]-c<(e-c)/2)g.left=true;if(a[1]-f<(b-f)/2)g.top=true;return g}},frameX:function(a){return a.frameElement?UI.getX(a.frameElement)+UI.frameX(a.parent):0},frameY:function(a){return a.frameElement?UI.getY(a.frameElement)+UI.frameY(a.parent):0},width:function(a){return parseInt(a.offsetWidth)},height:function(a){return parseInt(a.offsetHeight)},pageWidth:function(){return document.body.scrollWidth||document.documentElement.scrollWidth},pageHeight:function(){return document.body.scrollHeight||document.documentElement.scrollHeight},windowWidth:function(){var a=document.documentElement;return self.innerWidth||a&&a.clientWidth||document.body.clientWidth},windowHeight:function(){var a=document.documentElement;return self.innerHeight||a&&a.clientHeight||document.body.clientHeight},scrollX:function(a){var b=document.documentElement;if(a){var c=a.parentNode,e=a.scrollLeft||0;if(a==b)e=UI.scrollX();return c?e+UI.scrollX(c):e}return self.pageXOffset||b&&b.scrollLeft||document.body.scrollLeft},scrollY:function(a){var b=document.documentElement;if(a){var c=a.parentNode,e=a.scrollTop||0;if(a==b)e=UI.scrollY();return c?e+UI.scrollY(c):e}return self.pageYOffset||b&&b.scrollTop||document.body.scrollTop},scrollTo:function(a,b,c){if(a==document.documentElement||a==document.body)return window.scrollTo(b,c)},hide:function(a){if(!a)return false;if(UI.isString(a))a=this.G(a);var b=this.C(a,"display");if(b!="none")a.__curDisplay=b;a.style.display="none"},show:function(a){if(!a)return false;if(UI.isString(a))a=this.G(a);a.style.display=a.__curDisplay||""},toggle:function(a){if(UI.isString(a))a=this.G(a);this.C(a,"display")=="none"?this.show(a):this.hide(a)},hasClass:function(a,b){if(!a.className)return false;return a.className!=a.className.replace(new RegExp("\\b"+b+"\\b"),"")},addClass:function(a,b){if(a.className)if(this.hasClass(a,b))return false;else a.className+=" "+b;else a.className=b},removeClass:function(a,b){a.className=a.className.replace(new RegExp("\\b"+b+"\\b"),"")},toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)},next:function(a){a=a.nextSibling;if(a==null)return false;return UI.isElement(a)?a:this.next(a)},prev:function(a){a=a.previousSibling;if(a==null)return false;return UI.isElement(a)?a:this.prev(a)},remove:function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},append:function(a,b){b.appendChild(a)},prepend:function(a,b){var c=b.firstChild;c?UI.before(a,c):UI.append(a,b)},after:function(a,b){var c=b.parentNode;c.lastChild==a?c.appendChild(a):c.insertBefore(a,b.nextSibling)},before:function(a,b){b.parentNode.insertBefore(a,b)},replace:function(a,b){b.parentNode.replaceChild(a,b)},swap:function(){},wrap:function(a,b){if(UI.isString(a)){a.match(/(<[^\/][^<]*>)/g);var c=RegExp.lastMatch;a=a.replace(c,c+'<pre class="wrapObject___"></pre>');a=UI.html(a)[0];UI.before(a,b);UI.replace(b,UI.GC(a,"pre.wrapObject___")[0])}else{UI.before(a,b);b.appendChild(b)}},tmpl:function(){var a={};return function b(c,e){c=!/\W/.test(c)?(a[c]=a[c]||b(UI.G(c).innerHTML)):UI.tmplString(c);return e?c(e):c}}(),tmplString:function(a){return new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")},html:function(a){var b=UI.DC("div"),c=[];b.innerHTML=a;UI.each(b.childNodes,function(e){c.push(e)});return c},text:function a(b){var c=[];b=b.childNodes;for(var e=0,f=b.length;e<f;e++)c.push(b[e].nodeType!=1?b[e].nodeValue:a(b[e]));return c.join("")},parent:function(a,b){if(UI.isArray(a)){var c=[];UI.each(a,function(e){if(b&&UI.hasClass(e.parentNode,b)||!b)c.push(e.parentNode)});return c}return a.parentNode},parents:function(a,b){if(b){var c=[];a=UI.parents(a);UI.each(a,function(e){UI.hasClass(e,b)&&c.push(e)});return c}a=a.parentNode;return a.nodeName=="HTML"?[a]:[a].concat(UI.parents(a))},children:function(a,b){var c=[];if(b)b=b.split("|");UI.each(a.childNodes,function(e){var f=false;if(b)for(var g=0,q=b.length;g<q;g++)if(UI.hasClass(e,b[g])){f=true;break}if(UI.isElement(e)&&(!b||f))c.push(e)});return c},A:function(a,b,c){if(c==undefined)return a.getAttribute(b);else c==""?a.removeAttribute(b):a.setAttribute(b,c)},C:function(a,b,c){if(c==undefined)if(a.currentStyle){if(b=="opacity")return a.style.filter.indexOf("opacity=")>=0?parseFloat(a.style.filter.match(/opacity=([^)]*)/)[1])/100:"1";return a.currentStyle[b]}else{if(window.getComputedStyle){b=b.replace(/([A-Z])/g,"-$1");b=b.toLowerCase();return window.getComputedStyle(a,null).getPropertyValue(b)}}else if(b=="opacity"&&UI.B.ie)a.style.filter=(a.filter||"").replace(/alpha\([^)]*\)/,"")+"alpha(opacity="+c*100+")";else a.style[b]=c},DC:function(a){return document.createElement(a)},E:function(a){if(a&&a.clone)return a;a=window.event||a;return{clone:true,stop:function(){if(a&&a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},prevent:function(){if(a&&a.preventDefault)a.preventDefault();else a.returnValue=false},target:a.target||a.srcElement,x:a.clientX||a.pageX,y:a.clientY||a.pageY,button:a.button,key:a.keyCode,shift:a.shiftKey,alt:a.altKey,ctrl:a.ctrlKey,type:a.type,wheel:a.wheelDelta/120||-a.detail/3}},EA:function(a,b,c,e){if(UI.isString(a)){var f=c;c=function(){eval(f)}}if(a.addEventListener){if(b=="mousewheel")b="DOMMouseScroll";a.addEventListener(b,c,e);return true}else return a.attachEvent?a.attachEvent("on"+b,c):false},ER:function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false);return true}else return a.detachEvent?a.detachEvent("on"+b,c):false},G:function(a){return document.getElementById(a)},GT:function(a,b){return a.getElementsByTagName(b)},GC:function(){function a(h,m){if(!m){m=h;h=document}h=h||document;if(!/^[\w\-_#]+$/.test(m)&&h.querySelectorAll)return b(h.querySelectorAll(m));if(m.indexOf(",")>-1){m=m.split(/,/g);for(var n=[],j=0,p=m.length;j<p;++j)n=n.concat(a(m[j],h));return o(n)}m=m.match(f);var l=m.pop();n=(l.match(q)||i)[1];j=!n&&(l.match(g)||i)[1];p=l.split(".").slice(2);l=!n&&(l.match(k)||i)[1];if(j&&!l&&h.getElementsByClassName)l=b(h.getElementsByClassName(j));else{l=!n&&b(h.getElementsByTagName(l||"*"));if(j)l=e(l,"className",RegExp("(^|\\s)"+j+"(\\s|$)"),p);if(n)return(h=h.getElementById(n))?[h]:[]}return m[0]&&l[0]?c(m,l):l}function b(h){try{return Array.prototype.slice.call(h)}catch(m){for(var n=[],j=0,p=h.length;j<p;++j)n[j]=h[j];return n}}function c(h,m,n){var j=h.pop();if(j===">")return c(h,m,true);var p=[],l=-1,r=(j.match(q)||i)[1],s=!r&&(j.match(g)||i)[1];j=!r&&(j.match(k)||i)[1];var w=-1,v,t,u;for(j=j&&j.toLowerCase();v=m[++w];){t=v.parentNode;do{u=(u=(u=!j||j==="*"||j===t.nodeName.toLowerCase())&&(!r||t.id===r))&&(!s||RegExp("(^|\\s)"+s+"(\\s|$)").test(t.className));if(n||u)break}while(t=t.parentNode);if(u)p[++l]=v}return h[0]&&p[0]?c(h,p):p}function e(h,m,n,j){var p=-1,l,r=-1,s=[];for(j=j||"";l=h[++p];)if(n.test(l[m])&&l[m].hasString(j))s[++r]=l;return s}var f=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/ig,g=/^(?:[\w\-_]+)?\.([\w\-_]+)/,q=/^(?:[\w\-_]+)?#([\w\-_]+)/,k=/^([\w\*\-_]+)/,i=[null,null],o=function(){var h=+new Date,m=function(){var n=1;return function(j){var p=j[h],l=n++;if(!p){j[h]=l;return true}return false}}();return function(n){for(var j=n.length,p=[],l=-1,r=0,s;r<j;++r){s=n[r];if(m(s))p[++l]=s}h+=1;return p}}();return a}(),$:function(){}(),isDate:function(a){return this.getType(a)=="Date"},cloneDate:function(a){if(!a)return a;d=new Date;d.setTime(a.getTime());return d},formatDate:function(a,b){var c=b.replace(/\W/g,",").split(","),e=["yyyy","MM","dd","hh","mm","ss","ww"];a={y:a.getFullYear(),M:a.getMonth()+1,d:a.getDate(),h:a.getHours(),m:a.getMinutes(),s:a.getSeconds(),w:a.getDay()};for(var f=0,g=c.length;f<g;f++)for(var q=c[f],k=0;k<7;k++){var i=e[k].slice(-1);if(q.hasString(i)){if(i=="w"&&a[i]==0)a[i]=7;b=q.hasString(e[k])?b.replace(RegExp(e[k],"g"),this.addZero(a[i])):b.replace(RegExp(e[k].slice(e[k].length/2),"g"),a[i])}}return b},parseDate:function(a,b){b||(b="yyyy-MM-dd");b=b.replace(/\W/g,",").split(",");a=a.replace(/\D/g,",").split(",");var c=2E3,e=0,f=1,g=0,q=0,k=0,i=true;UI.each(b,function(o,h){if(a[h]==""||isNaN(a[h]))i=false;if(o.hasString("y"))c=Number(a[h]);if(o.hasString("M"))e=Number(a[h])-1;if(o.hasString("d"))f=Number(a[h]);if(o.hasString("h"))g=Number(a[h]);if(o.hasString("m"))q=Number(a[h]);if(o.hasString("s"))k=Number(a[h]);if(o.hasString("w"))k=Number(a[h])});if(!i)return false;return new Date(c,e,f,g,q,k)},isObject:function(a){return typeof a=="object"},isElement:function(a){return a&&a.nodeType==1},isUndefined:function(a){return typeof a=="undefined"},isFunction:function(a){return this.getType(a)=="Function"},isNumber:function(a){return this.getType(a)=="Number"},isString:function(a){return this.getType(a)=="String"},isArray:function(a){return this.getType(a)=="Array"},getType:function(a){return Object.prototype.toString.call(a).slice(8,-1)},addZero:function(a,b){b||(b=2);return Array(Math.abs((""+a).length-(b+1))).join(0)+a},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},random:function(a,b){if(a==undefined)a=0;if(b==undefined)b=9;return Math.floor(Math.random()*(b-a+1)+a)},has:function(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c]==b)return true;return false},each:function(a,b){if(UI.isUndefined(a[0]))for(var c in a)UI.isFunction(a[c])||b(c,a[c]);else{c=0;for(var e=a.length;c<e;c++)UI.isFunction(a[c])||b(a[c],c)}},map:function(a,b){if(UI.isString(b))b=eval("(function(a,i) { return "+b+"})");var c=[];UI.each(a,function(e,f){e=b(e,f);if(UI.isArray(e))c=c.concat(e);else c.push(e)});return c},grep:function(a,b){if(UI.isString(b))b=eval("(function(a,i) { return "+b+"})");var c=[];UI.each(a,function(e,f){b(e,f)&&c.push(e)});return c},merge:function(a,b){var c=[];if(b){UI.each(b,function(e){UI.has(a,e)||c.push(e)});return a.concat(c)}else{UI.each(a,function(e){UI.has(c,e)||c.push(e)});return c}},apart:function(a,b){var c=[];UI.each(a,function(e){UI.has(b,e)||c.push(e)});return c},sort:{number:function(a,b){return a-b},numberDesc:function(a,b){return b-a},string:function(a,b){return a.localeCompare(b)},stringDesc:function(a,b){return b.localeCompare(a)}},ready:function(a){if(UI.ready.done)return a();if(UI.ready.timer)UI.ready.ready.push(a);else{UI.ready.ready=[a];UI.ready.timer=setInterval(UI.isReady,13)}},isReady:function(){if(UI.ready.done)return false;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){clearInterval(UI.ready.timer);UI.ready.timer=null;for(var a=0;a<UI.ready.ready.length;a++)UI.ready.ready[a]();UI.ready.ready=null;UI.ready.done=true}},B:function(){var a={},b=navigator.userAgent;a.ie6=b.hasString("MSIE 6")&&!b.hasString("MSIE 7")&&!b.hasString("MSIE 8");a.ie=b.hasString("MSIE");a.tt=b.hasString("TencentTraveler");a.opera=window.opera||b.hasString("Opera");a.safari=b.hasString("WebKit");try{a.maxthon=window.external&&window.external.max_version}catch(c){}return a}()});UI.B.ie&&document.execCommand("BackgroundImageCache",false,true);window.console||(console={log:function(a){document.title+="_"+a},dir:function(){}});UI.ImageDetail={_title:UI.G("imgTitle"),_current:UI.G("imgCurrent"),_currentCache:UI.DC("div"),_currentCover:UI.G("imgCover"),_prev:UI.G("imgPrev"),_next:UI.G("imgNext"),_prevBtn:UI.G("imgPrevBtn"),_nextBtn:UI.G("imgNextBtn"),_prevPage:UI.G("imgPrevPage"),_nextPage:UI.G("imgNextPage"),_imgFull:UI.G("imgFull"),_imgAll:UI.G("imgAll"),_location:UI.G("imgLocation"),_numTotal:UI.G("imgNumTotal"),_numTotal2:UI.G("imgNumTotal2"),_numCurrent:UI.G("imgNumCurrent"),_list:UI.G("imgList"),_listAll:UI.G("imgListAll"),_box:UI.G("imgBox"),_class:{p:"prev_disable",n:"next_disable"},config:{numPerPage:5,heightPerPage:655,heightPerImg:131,bigImg:{width:798,height:589},smallImg:{width:110,height:110},tmpl:'<% for ( var i = 0; i < list.length; i++ ) { %><li><a href="javascript:void(0)" onfocus="this.blur()" onclick="UI.ImageDetail.show(<%=i%>,this);return false;"><img rel="<%=list[i][2]%>" onload="UI.ImageDetail.positoin(this,1)" title="<%=list[i][1]%>" /></a></li><% } %>',tmplList:'<% for ( var i = 0; i < list.length; i++ ) { %><li><a href="javascript:void(0)" onfocus="this.blur()" onclick="UI.ImageDetail.showBox(<%=i%>,this);return false;" class="box" style="background-image:url(<%=list[i][2].replace(/3\\./gi,"2.")%>)"></a><a href="javascript:void(0)" onclick="UI.ImageDetail.showBox(<%=i%>,this);return false;" class="txt"><%=list[i][1]%></a></li><% } %>',tmplCache:'<% for ( var i = 0; i < list.length; i++ ) { %><img rel="<%=(UI.ImageDetail.urlRule ? UI.ImageDetail.urlRule(list[i][2]) : list[i][3])%>" onload="this.loaded = true"/><% } %>'},delay:{},init:function(a){function b(){var e=c.data;c._location.innerHTML=e[0];c.list=e[1];if(!c.list.length)return false;c.numTotal=c.list.length;if(a.current){UI.hide(c._listAll.parentNode);c.listImg=UI.GT(c._list,"img");c.current=a.current==0?e[1][0][0]:a.current;c.pageTotal=Math.ceil(c.numTotal/c.config.numPerPage);c.getIndex();c.buildList(0);c._list.builded=true;c.numTotal==1&&UI.hide(c._imgAll)}else{UI.hide(c._imgAll);UI.hide(c._box);c.buildList(1);c._listAll.builded=true}c._currentCache.innerHTML=(new UI.tmplString(c.config.tmplCache))({list:e[1]});c.show(c.index);setTimeout(function(){UI.scrollTo(document.body,0,UI.getY(c._numTotal))},0)}var c=this;this._prev.onclick=this._prevBtn.onclick=function(){c.prev();this.blur();return false};this._next.onclick=this._nextBtn.onclick=function(){c.next();this.blur();return false};this._prevPage.onclick=function(){c.prevPage();return false};this._nextPage.onclick=function(){c.nextPage();return false};this._prev.onfocus=this._next.onfocus=this._prevBtn.onfocus=this._nextBtn.onfocus=this._prevPage.onfocus=this._nextPage.onfocus=function(){this.blur()};this._current.onload=function(){this.style.margin="-9999px";UI.ImageDetail.positoin(this)};this._imgAll.onclick=function(){c.showList()};UI.EA(this._list,"mousewheel",function(e){var f=UI.E(e);clearTimeout(c.delay.wheel);c.delay.wheel=setTimeout(function(){f.wheel==1?c.prevPage():c.nextPage()},100);f.prevent()});this.animate=a.animate;this.loop=a.loop;this.urlRule=a.urlRule;this.urlRuleBig=a.urlRuleBig;this.call=a.call;this.index=null;this.title=document.title;if(UI.windowHeight()<725){this.config.numPerPage=4;this.config.bigImg.height-=this.config.heightPerImg;UI.addClass(this._box,"photo_box_small")}a.json?UI.getScript(a.json,b):b()},build:function(){var a=this.index,b=this._class.n,c=this._class.p;if(!this.list||isNaN(a))return false;var e=this._currentCover;UI.C(e,"opacity","1");this._title.style.cssText="display:none;top:50%;";this._numTotal.innerHTML=this._numTotal2.innerHTML=this.numTotal;this._numCurrent.innerHTML=this.numCurrent=a+1;if(a==null)return false;this._title.innerHTML=this.list[a][1];this._current.src=this.urlRule?this.urlRule(this.list[a][2]):this.list[a][3];this._imgFull.href=this.urlRuleBig?this.urlRuleBig(this.list[a][2]):this.list[a][3];document.title=(this.list[a][1]?this.list[a][1]+"_":"")+this.title;var f=this._currentCache.childNodes;this.preload(f[a]);this.preload(f[a+1]);a>0&&this.preload(f[a-1]);f[a].loaded||UI.addClass(e,"loading");if(!this.loop&&a==0){UI.addClass(this._prevBtn,c);UI.addClass(this._prev,c);this._prev.title=""}else{UI.removeClass(this._prevBtn,c);UI.removeClass(this._prev,c);this._prev.title=UI.A(this._prev,"rel")}if(!this.loop&&a==this.numTotal-1){UI.addClass(this._nextBtn,b);UI.addClass(this._next,b);this._next.title=""}else{UI.removeClass(this._nextBtn,b);UI.removeClass(this._next,b);this._next.title=UI.A(this._next,"rel")}f=this._list.childNodes;(b=f[this.indexTmp])&&UI.removeClass(b,"cur");UI.addClass(f[a],"cur");this.indexTmp=a;f=document.location.hash.split("=");if(f.length){f[f.length-1]=this.list[a][0];document.location.hash=f.join("=")}f=Math.ceil(this.config.numPerPage/2)-1;this.indexScroll=a>=f?a-f:0;this.showPage(this.indexScroll);clearInterval(this.delay.page);this.delay.page=UI.animate(this._list,"scrollTop",this.config.heightPerImg*(a>f?a-f:0));this.call&&this.call()},buildList:function(a){switch(a){case 0:this._list.innerHTML=(new UI.tmplString(this.config.tmpl))({list:this.data[1]});break;case 1:this._listAll.innerHTML=(new UI.tmplString(this.config.tmplList))({list:this.data[1]});break}},prev:function(){if(this.index>0){this.index--;this.build()}else if(this.loop){this.index=this.numTotal-1;this.build()}},next:function(){if(this.index<this.numTotal-1){this.index++;this.build()}else if(this.loop){this.index=0;this.build()}},prevPage:function(){if(this.indexScroll>=0){var a=this.config.numPerPage,b=this.indexScroll-a;if(b<=0)b=this.loop&&b==-a?this.numTotal-a:0;this.showPage(b)}},nextPage:function(){if(this.indexScroll<this.numTotal-1){var a=this.indexScroll+this.config.numPerPage;if(a>=this.numTotal)a=this.loop?0:this.indexScroll;this.showPage(a)}},show:function(a){this.index=a;this.build()},showPage:function(a){var b=this._class.n,c=this._class.p,e=this.config.numPerPage;clearInterval(this.delay.page);this.delay.page=UI.animate(this._list,"scrollTop",a*this.config.heightPerImg);this.indexScroll=a;!this.loop&&this.indexScroll==0?UI.addClass(this._prevPage,c):UI.removeClass(this._prevPage,c);!this.loop&&this.numTotal-this.indexScroll<=e?UI.addClass(this._nextPage,b):UI.removeClass(this._nextPage,b);a=this.indexScroll-e;for(e=this.indexScroll+e;a<e;a++)a>=0&&this._list.childNodes[a]&&this.preload(this.listImg[a])},showList:function(){UI.hide(this._box);UI.show(this._listAll.parentNode);UI.hide(this._imgAll);document.title=this.title;if(!this._listAll.builded){this.buildList(1);this._listAll.builded=true}UI.addClass(this._listAll.childNodes[this.index],"on")},showBox:function(a,b){UI.show(this._box);UI.hide(this._listAll.parentNode);this.numTotal!=1&&UI.show(this._imgAll);if(!this._list.builded){this.buildList(0);this.listImg=UI.GT(this._list,"img");this._list.builded=true}this.index&&UI.removeClass(this._listAll.childNodes[this.index],"on");this.show(a,b)},getIndex:function(a){for(var b=0;b<this.numTotal;b++)if(this.list[b][0]==(a||this.current))return this.index=b},preload:function(a){if(a){var b=UI.A(a,"rel");if(b){a.src=b;UI.A(a,"rel","")}}},positoin:function(a,b){if(!b){UI.A(a,"width","");UI.A(a,"height","");var c=this._currentCover;UI.removeClass(c,"loading")}var e=b?this.config.smallImg:this.config.bigImg;if(a.height>e.height){a.width=a.width*e.height/a.height;a.height=e.height}if(a.width>e.width){a.height=a.height*e.width/a.width;a.width=e.width}a.style.margin="-"+a.height/2+"px 0 0 -"+a.width/2+"px";if(!b){UI.ImageDetail._title.style.cssText+=";display:block;margin-top:"+UI.height(a)/2+"px;";this.animate?UI.animate(c,"opacity",0,null,0.6):UI.C(c,"opacity","0")}}};UI.Slide=function(a){function b(e){e=UI.E(e).target;c.page(e.num)}var c=this;a.target.Slide=1;c._parent=a.target.parentNode;c._body=a.target;c._list=UI.GC(a.target,"ul")[0];c._list.style.cssText="width:9999px;";c._li=UI.GC(c._body,"li");c._page=c.$(".page");c._prev=c.$(".prev");c._next=c.$(".next");c.stepSmall=UI.width(c._li[0])+c._li[0].offsetLeft;c.perPage=parseInt(UI.width(c._body)/c.stepSmall)+1;c.total=Math.ceil(c._li.length/c.perPage);c.step=c.perPage*c.stepSmall;c._page.innerHTML=(new UI.tmplString(c.tmpl.page))({num:c.total});if(c.total>1)UI.show(c._page);else{UI.hide(c._page);UI.hide(c._prev);UI.hide(c._next)}c.page();UI.EA(c._prev,"click",function(){c.prev()});UI.EA(c._prev,"click",UI.Slide.click);UI.EA(c._next,"click",function(){c.next()});UI.EA(c._next,"click",UI.Slide.click);UI.each(c._page.childNodes,function(e,f){e.num=f+1;UI.EA(e,"click",UI.Slide.click);UI.EA(e,"click",b)})};UI.Slide.click=function(a){a=UI.E(a);a.prevent();a.target.blur()};UI.Slide.prototype={auto:0,loop:1,cur:1,tmpl:{page:'<%for(var i=0;i<num;i++){%><a href="#" class="ico dot<%if(i==0){%> dot_on<%}%>"></a><%}%>'},$:function(a){return UI.GC(this._parent,a)[0]},page:function(a){this.cur=a||this.cur;if(this.cur<1)this.cur=1;else if(this.cur>this.total)this.cur=this.total;this.cur==1?UI.addClass(this._prev,"prev_off"):UI.removeClass(this._prev,"prev_off");this.cur==this.total?UI.addClass(this._next,"next_off"):UI.removeClass(this._next,"next_off");UI.removeClass(UI.GC(this._page,".dot_on")[0],"dot_on");UI.addClass(this._page.childNodes[this.cur-1],"dot_on");this.scroll()},prev:function(){this.cur--;this.page()},next:function(){this.cur++;this.page()},scroll:function(){clearInterval(this.delay);this.delay=UI.animate(this._body,"scrollLeft",(this.cur-1)*this.step)}};UI.slide=function(a){UI.each(UI.GC(a),function(b){b.Slide||new UI.Slide({target:b,action:"x"})})};UI.TagSearch=function(a){function b(){UI.hasClass(this,"disabled")||e(this,this.innerHTML);return false}function c(){var k=this.parentNode.previousSibling.innerHTML,i;UI.each(g._tag,function(o){if(o.innerHTML==k)i=o});e(i,k);return false}function e(k,i){var o=UI.GC(g._tag[0].parentNode,".on")[0],h=o.innerHTML;UI.removeClass(o,"on");UI.addClass(k,"on");if(i=="\u5168\u90e8"){UI.show(g._resultAll);g.oldKey&&UI.hide(g._results[h])}else if(g._results[i]){g.loadKey=null;UI.hide(g._results[h]);UI.hide(g._resultAll);UI.show(g._results[i])}else{g.loadKey=i;UI.getScript(g.action+"&filterattr=F5&filtervalue="+i)}g.oldKey=h}function f(){this.blur()}var g=this;g._body=UI.GC(a.target)[0];g._tag=UI.GC(g._body,".tab a");g._more=UI.GC(g._body,".v_more");g._resultAll=UI.GC(g._body,".serch_tag_all")[0];g._result=UI.GC(g._body,".serch_tag_result")[0];g._results={};for(var q in a.value)g.action+="&"+q+"="+a.value[q];UI.each(g._tag,function(k){k.onclick=b;k.onfocus=f});UI.each(g._more,function(k){k.onclick=c})};UI.TagSearch.prototype={action:"http://ericapi.webdev.com/php/d_search_js.php?fun=UI.tagSearch.show",tmpl:'<dl><dt><%=key%></dt><dd><ul><%for(var i in data){%><li><a href="<%=data[i][2]%>">\u00b7 <%=data[i][0]%></a></li><%}%></ul></dd></dl>',show:function(a){if(a.result==1){a.key=this.loadKey;this._results[this.loadKey]=UI.html((new UI.tmplString(this.tmpl))(a))[0];UI.append(this._results[this.loadKey],this._result);UI.hide(this._resultAll);UI.hide(this._results[this.oldKey])}}};/*  |xGv00|b8ea1ca25eeaa38bfc13859666d1c184 */